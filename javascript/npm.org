#+TITLE: npm 工具用法
#+DATE: <2019-06-02 13:39:49>
#+CATEGORIES: 软件用法 
#+KEYWORDS: node,npm
#+DESCRIPTION: 如何使用 npm 包 管理器 
* npm ( javascript package manager )
** 用法 
*** 安装模块 npm install PACKAGENAME
*** 全局安装 npm install PACKAGENAME -g
*** 强制安装  sudo npm install --unsafe-perm -g PACKAGENAME
*** 下载指定版本包 npm install argv@0.0.1
  #+HTML: <!-- more -->
*** 通过文件下载 npm install
    package.json
    #+begin_src json
      {
          "name": "node-echo",
          "main": "./lib/echo.js",
          // 这下面就是下载的包
          "dependencies": {
              "argv": "0.0.2"
          }
      }
#+end_src
*** 清空本地缓存 npm cache clear
*** 更新包 npm update PACKAGENAME [-g]
*** 卸载 npm uninstall PACKAGENAME
*** 显示模块 npm (  ls,list )  [ -g ]
*** 查找  npm search PACKAGENAME
*** 创建 npm install
*** 显示当前配置 npm config list
*** 显示全局安装目录 npm config get CONFIGNAME
*** 修改全局配置 npm config set CONFIGNAME  CONFIGVALUE
 
** package.json [ 模块配置文件 ]
  - name - 包名。（不要把 node 或者 js 放在名字中）
  - version - 包的版本号。
  - dependencies - 项目运行所依赖的模块
  - devDependencies - 项目开发所需要的模块
  - bin - 这需要在你的 package.json 中提供一个 bin 字段，它是一个命令名和本地文
    件名的映射。在安装时，如果是全局安装，npm 将会使用符号链接把这些文件链接到
    prefix/bin，如果是本地安装，会链接到./node_modules/.bin/

** 发布代码
*** 注册账号 https://www.npmjs.com/signup
*** 绑定本地 npm adduser
*** 发布模块 npm publish
*** 版本号约定
    语义版本号分为 X.Y.Z 三位，分别代表主版本号、次版本号和补丁版本号。
  + 如果只是修复 bug，需要更新 Z 位。
  + 如果是新增了功能，但是向下兼容，需要更新 Y 位。
  + 如果有大变动，向下不兼容，需要更新 X 位。
*** 包版本
**** "^4.14.0"   指 4.14.0<=x<5.0.0
**** "~4.14.0"   指 4.14.0<=x<4.15.0
** cnpm
   淘宝对 官方站点  https://www.npmjs.com/  的一个镜像
  
   安装：npm install cnpm -g --registry=https://registry.npm.taobao.org
   : 注意：安装完后最好查看其版本号 cnpm -v 或关闭命令提示符重新打开，安装完直接使用有可能会出现错误 
   : PS：cnpm 跟 npm 用法完全一致，只是在执行命令时将 npm 改为 cnpm。
   : cnpm 的仓库只是 npm 仓库的一个拷贝，它不承担 publish 工作，所以你用 cnpm publish 命令会执行失败的
   : 不仅是 publish 会执行失败，其它的需要注册用户(npm adduser)、或者修改 package 状态等命令都无法用 cnpm
* 错误 faq
** npm err! Error: connect ECONNREFUSED 127.0.0.1:8087
   $ npm config set proxy null
** npm ERR! Unexpected end of JSON input while parsing near 
清除缓存  npm cache clean --force
