#+TITLE: Python 简介
#+DESCRIPTION: Python 语言学习笔记
#+CATEGORIES[]: 技术
#+TAGS[]: Python
#+DATE: 2019-11-29T21:57:09+08:00


一门抽象程度高的语言，语言技术是给那些喜欢折腾计算机的或者计算机软件开发人员用的。
# more 
** 安装
   折腾环境的安装就不说了。
** 编码问题
   *python2* 默认是认不得中文等世界语的，只认得英文， *python3* 改掉了，这点注意看下版本。
   
   #+begin_src py
     # python2 中加上一句说明。
     #-*-coding:utf-8-*-
   #+end_src

** 计算机可以处理的东西 ( 数据类型 )
   每个东西有一种类型的属性.
*** 列表类型 (list)
    
    列表表示一串东西，一般一个包含子项目的东西，用列表表示比较好。
    #+begin_src python
      [ 'name', 786 , 2.23, 'john', 70.2 ]
    #+end_src
 
 
    #+begin_src python
      # 列表里的东西可以修改，增减。 
      # 增加
        myMoney[4] = [ "老九"]
        # 是否含有 
        "老九" in myMoney
        # 删除
        del myMoney[1]
    #+end_src
 
    一些方法 
    | len(list)               | 列表元素个数                                                       |
    | max(list)               | 返回列表元素最大值                                                 |
    | min(list)               | 返回列表元素最小值                                                 |
    | list(seq)               | 将元组转换为列表                                                   |
    | list.append(obj)        | 在列表末尾添加新的对象                                             |
    | list.count(obj)         | 统计某个元素在列表中出现的次数                                     |
    | list.extend(seq)        | 在列表末尾一次性追加另一个序列中的多个值（用新列表扩展原来的列表） |
    | list.index(obj)         | 从列表中找出某个值第一个匹配项的索引位置                           |
    | list.insert(index, obj) | 将对象插入列表                                                     |
    | list.pop(obj=list[-1])  | 移除列表中的一个元素（默认最后一个元素），并且返回该元素的值       |
    | list.reverse()          | 反向列表中元素                                                     |
    | list.sort([func])       | 对原列表进行排序                                                   |

*** 元组 (tuple)  
    
    子项目不能修改的列表
    
    #+begin_src python
      ( 'runoob', 786 , 2.23, 'john', 70.2 )
    #+end_src
    
    
    - 创建元组 x=[ (person.name,person.age) for person in people ]
    - 有条件地创建元组    x=[ (person.name,person.age) for person in people if person.age<34]
    - 表达式化数组 xx=[(person.age**2 if person.age<34 else person.age) for person in people]

*** 字典 (dictionary) 
    
    子项目可以另外命名的列表
    
    #+begin_src python
      {'name': 'john','code':6734, 'dept': 'sales'}
    #+end_src
    
*** 集合 
    无序不重复的列表
    #+begin_src python
      set([1,3,4])
    #+end_src
    
*** 空值 None
*** 类型转换
    
    | 将 字符串 x 转换为一个整数                            | int(x [,base])         |
    | 将 字符串 x 转换到一个浮点数                          | float(x)               |
    | 创建一个复数                                          | complex(real [,imag])  |
    | 将对象 x 转换为字符串                                 | str(x)                 |
    | 将对象 x 转换为表达式字符串                           | repr(x)                |
    | 用来计算在字符串中的有效 Python 表达式,并返回一个对象 | eval(str)              |
    | 将序列 s 转换为一个元组                               | tuple(s)               |
    | 将序列 s 转换为一个列表                               | list(s)                |
    | 将一个整数转换为一个字符                              | chr(x)                 |
    | 将一个整数转换为 Unicode 字符                         | unichr(x)              |
    | 将一个字符转换为它的整数值                            | ord(x)                 |
    | 将一个整数转换为一个十六进制字符串                    | hex(x)                 |
    | 将一个整数转换为一个八进制字符串                      | oct(x)                 |
*** 自定义类型  
    系统提供的东西不满足你要处理的东西的复杂性，就可以自定义
**** 定义类 
     #+begin_src python -n
       class ClassName:
           # 构造函数
           def __init__(self,...):
               return
           # 析构函数
           def __del__(self,...):
               return 
     #+end_src
     
     实例 
     #+BEGIN_SRC python
       class wa:
        def __init__(self, items={}):
         '''items'''
            if type(item)!=type({}):
                raise TypeError("类型错误")
               self.items=items
            return
           def	deposit(self,	amount):
            self.balance	=	self.balance	+	amount
            return	self.balance
           def	withdraw(self,	amount):
            if	amount	>	self.balance:
             return	'Insufficient	funds'
     #+END_SRC
**** 专有方法
     | __init__                      | 构造函数，在生成对象时调用                                                                                       |
     | __del__                       | 析构函数，释放对象时使用                                                                                         |
     | __repr__                      | 打印，转换                                                                                                       |
     | __setitem__                   | 按照索引赋值                                                                                                     |
     | __getitem__                   | 按照索引获取值                                                                                                   |
     | __len__                       | 获得长度                                                                                                         |
     | __call__                      | 函数调用                                                                                                         |
     | __add__                       | 加运算                                                                                                           |
     | __sub__                       | 减运算                                                                                                           |
     | __mul__                       | 乘运算                                                                                                           |
     | __div__                       | 除运算                                                                                                           |
     | __mod__                       | 求余运算                                                                                                         |
     | __pow__                       | 乘方                                                                                                             |
     | type(obj)                     | 来获取对象的相应类型；                                                                                           |
     | isinstance(obj, type)         | 判断对象是否为指定的 type 类型的实例；                                                                           |
     | hasattr(obj, attr)            | 判断对象是否具有指定属性/方法；                                                                                  |
     | getattr(obj, attr[, default]) | 获取属性/方法的值, 要是没有对应的属性则返回 default 值（前提是设置了 default），否则会抛出 AttributeError 异常； |
     | setattr(obj, attr, value)     | 设定该属性/方法的值，类似于 obj.attr=value；                                                                     |
     | dir(obj)                      | 可以获取相应对象的所有属性和方法名的列表：不带参数，显示环境下的变量，引入的模块数组                             |
    
**** 类的继承
     类是面向对象中的技术，为了东西和方法方便扩展

     #+begin_src python
       # 单继承
       class ClassName(BaseClassName):
        # 多继承
        class ClassName(Base1,Base2,Base3):
     #+end_src
**** 类的私有属性与私有方法
     - 私有属性 __private_attrs：两个下划线开头，声明该属性为私有，不能在类地外部被使用或直接访问。在类内部的方法中使用时 self.__private_attrs 类的方法
     - 私有方法 __private_method：两个下划线开头，声明该方法为私有方法，不能在类地外部调用。在类的内部调用 self.__private_methods 
** 定义处理事情的方式 (函数)
   怎么处理事情，除了计算机自带的，还能自己手动编写
*** 定义函数
    #+BEGIN_SRC python
      def functionname( parameters ):
          "函数_文档字符串"
          function_suite
          return [expression]
    #+END_SRC
*** 不定长参数函数
    就是函数的参数长度不定
    #+begin_src python
      def print_user_info( name ,  age  , sex = '男' , * hobby):
          # 打印用户信息
          print('爱好：{}'.format(hobby))
          return;

      # 调用 print_user_info 函数
      print_user_info( '两点水' ,18 , '女', '打篮球','打羽毛球','跑步')
    #+end_src
*** 关键字参数 ( 给参数命名)
    #+begin_src python
      def print_user_info( name ,  age  , sex = '男' ):
          # 打印用户信息
          print('性别：{}'.format(sex))
          return;

      # 调用 print_user_info 函数
      print_user_info( name = '两点水' ,age = 18 , sex = '女')
    #+end_src

*** 匿名函数 lambda (不要重复使用的函数，就不给名字了)
    #+begin_src python
      lambda [arg1 [,arg2,.....argn]]:expression
    #+end_src
     
    #+begin_src python
      # -*- coding: UTF-8 -*-

      sum = lambda num1 , num2 : num1 + num2;
      print( sum( 1 , 2 ) )
    #+end_src
*** 入口函数
    #+begin_src python
      if __name__ == '__main__':
    #+end_src
      
** 控制处理流程
   分支 ( if 或if not )
   #+begin_src python
     if cond:
        语句... 
   #+end_src
   
   重复多做几次
   #+begin_src python
     for var in collection:
             语句... 
        #+end_src
** 模块
   #+begin_quote
   模块是为了合理组织东西，便于重用
   #+end_quote
   #+begin_export type
   #+end_export 
   一个文件就是一个模块了，文件名表示模块名
   
*** 使用模块 
    #+begin_src python
      from person_start import Person
      from pymodule import name
    #+end_src

** 包
   #+begin_quote
   包和模块是一样的目的，就是包是由模块组成的，模块是包的一部分。
   #+end_quote
   #+begin_src python
     import 目录名.模块名
   #+end_src
** 测试
   预防性编程的一种方式
   #+begin_src python
     try:
      "nihao".index('bao')
     except Exception:
      print "some error"
   #+end_src

** 帮助
   - help()  函数或类的详细说明
   - dir() 函数或类的简单说明
** 环境管理
   因为 *Python* 最大的问题是各版本不兼容，所以还要要管理版本问题。  
*** pipenv 
    #+begin_src sh
      # 创建 Python 2/3 版本的项目
      $ pipenv --two/--three

      # 安装项目依赖，会在当前目录下生成 .venv 目录，包含 python 解释器
      $ pipenv install
      $ pipenv install --dev

      # 弹出 Virtual Env 对应的脚本环境
      $ pipenv shell

      # 执行文件
      $ pipenv run python

      # 定位项目路径
      $ pipenv --where

      # 定位虚拟环境路径
      $ pipenv --venv

      # 定位 Python 解释器路径
      $ pipenv --py
    #+end_src
