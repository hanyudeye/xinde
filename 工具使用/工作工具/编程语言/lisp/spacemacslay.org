#+TITLE: layers 简介
#+DESCRIPTION: layers 简介
#+KEYWORDS: spacemacs,layer
#+CATEGORIES: 软件使用
#+DATE: <2019-06-03 14:36:36>

* layer
** auto-completion
   1. 要添加 auto-completion
   2. 还必须至少安装一个支持的语言层才能起作用

   #+begin_verse
    语法片段 *默认* 不在 *完成项* 里面。
    启用 auto-completion-enable-snippets-in-popup t

    Tooltips 更多提示 
    auto-completion-enable-help-tooltip t

    手动出来（需要手动按 *M-h* )
    auto-completion-enable-help-tooltip 'manual
    
    按使用频次排序 
    auto-completion-enable-sort-by-usage t

    *jk* 很适用完成确认如果没有的话
    auto-completion-complete-with-key-sequence "jk"
   #+end_verse

   company                     
   | ~C-d~   | 补全时按此键可以显示文档         |
   | ~C-/~   | 在 Helm 中显示补全列表           |
   | ~C-M-/~ | filter the company dropdown menu |
   | ~M-h~   | 显示候选人文档，工具提示要开启   |
   

   Yasnippet
   | ~M-/~     | Expand a snippet if text before point is a prefix of a snippet |
   | ~SPC i s~ | List all current yasnippets for inserting                      |

   Auto-yasnippet
   | ~SPC i S c~ | create a snippet from an active region                                    |
   | ~SPC i S e~ | Expand the snippet just created with ~SPC i y~                            |
   | ~SPC i S w~ | Write the snippet inside =private/snippets= directory for future sessions |

** c-c++
   反汇编 disaster
   代码格式化 clang-format
   反射 smeantic-refactor
   代码导航 cscope
   自动补全 auto-completion
   调试器 realgud 

   | ~SPC m g a~ | open matching file                   |
   | ~SPC m g A~ | open matching file in another window |
   | ~SPC m D~   | 反汇编                               |
   | ~SPC m r .~ | srefactor: refactor thing at point.  |

*** ccls 
  - M-x ccls-member-hierarchy (显示类，对象，成员列表)
  - M-x ccls-code-lens-mode
*** 通用编译 compile
** cscope  
   用法: 先要创建 *Cscope 索引文件 * 
   对于 C 和 C++ 工程，使用 cscope-index-files，对于 Python 工程,使用 cscope/run-pycscope ,  快捷键 ~SPC m g i~.
   
   | ~SPC m g =~ | 查看符号的赋值                                |
   | ~SPC m g c~ | find which functions are called by a function |
   | ~SPC m g C~ | find where a function is called               |
   | ~SPC m g d~ | 查找定义                                      |
   | ~SPC m g e~ | search regular expression                     |
   | ~SPC m g f~ | find a file                                   |
   | ~SPC m g F~ | find which files include a file               |
   | ~SPC m g i~ | 创建索引                                      |
   | ~SPC m g r~ | 查找符号的引用                                |
   | ~SPC m g x~ | search text                                   |

** debug 
   使用 realgud 包调试多种语言
   特定于语言的调试器由相应的层添加。 如果你想
   添加其他调试器，将它们添加到= debug-additional-debuggers =变量中。

   #+BEGIN_SRC emacs-lisp
     (setq-default dotspacemacs-configuration-layers
                   '((debug :variables debug-additional-debuggers '("remake"))))
   #+END_SRC


   java -agentlib:jdwp=transport=dt_socket,server=y,address=<port> <class>
   | ~SPC m d d~ | open cmd buffer      |
   | ~bb~        | set break            |
   | ~bc~        | clear break          |
   | ~bd~        | delete break         |
   | ~bs~        | disable break        |
   | ~be~        | enable break         |
   | ~c~         | continue             |
   | ~i~         | step into            |
   | ~J~         | jump to current line |
   | ~o~         | step out             |
   | ~q~         | quit debug           |
   | ~r~         | restart              |
   | ~s~         | step over            |
   | ~S~         | goto cmd buffer      |
   | ~v~         | eval variable        |

** chinese
*** [[https://github.com/tumashu/pyim][GitHub - tumashu/pyim: 一个 emacs 中文输入法，支持全拼，双拼，五笔，仓颉和Rime，在线文档：]] :website:
**** Article
     Note: this file is auto converted from pyim.el by [[https://github.com/tumashu/el2org][el2org]], please do not edit it by hand!!!
***** [[#pyim-使用说明][]] pyim 使用说明
****** [[#简介][]] 简介
       pyim 是 Emacs 环境下的一个中文输入法，最初它只支持全拼输入，所以当时
       "pyim" 代表 "Chinese Pinyin Input Method" 的意思，后来根据同学的提议，添
       加了五笔的支持，再叫 “拼音输入法” 就不太合适了，所以你现在可以将它理解
       为 “PengYou input method”： 平时像朋友一样帮助你，偶尔也像朋友一样犯二
****** [[#背景][]] 背景
       pyim 的代码源自 emacs-eim。

       emacs-eim 是 Emacs 环境下的一个中文输入法框架， 支持拼音，五笔，仓颉以及
       二笔等多种输入法，但遗憾的是，2008 年之后它就停止了开发，我认为主要原因是
       外部中文输入法快速发展。

       虽然外部输入法功能强大，但不能和 Emacs 默契的配合，这一点极大的损害了
       Emacs 那种 *行云流水* 的感觉。而本人在使用（或者叫折腾） emacs-eim 的过程
       中发现：

    1. *当 emacs-eim 词库词条超过 100 万时，选词频率大大降低，中文体验增强。*
    2. *随着使用时间的延长，emacs-eim 会越来越好用（个人词库的积累）。*

    于是我 fork 了 emacs-eim 输入法的部分代码, 创建了一个项目：pyim。

****** [[#目标][]] 目标
       pyim 的目标是： *尽最大的努力成为一个好用的 Emacs 中文输入法* ，具体可表现为三个方面：

    1. Fallback: 当外部输入法不能使用时，比如在 console 或者 cygwin 环境下，尽最大可能让 Emacs 用户不必为输入中文而烦恼。
    2. Integration: 尽最大可能减少输入法切换频率，让中文输入不影响 Emacs 的体验。
    3. Exchange: 尽最大可能简化 pyim 使用其他优秀输入法的词库的难度和复杂度。

****** [[#特点][]] 特点
    1. pyim 支持全拼，双拼，五笔和仓颉，其中对全拼的支持最好。
    2. pyim 通过添加词库的方式优化输入法。
    3. pyim 使用文本词库格式，方便处理。

****** [[#安装][]] 安装
    1. 配置 melpa 源，参考： [[http://melpa.org/#/getting-started]]

    2. M-x package-install RET pyim RET

    3. 在 Emacs 配置文件中（比如: ~/.emacs）添加如下代码：

       #+BEGIN_EXAMPLE
            (require 'pyim)
            (require 'pyim-basedict) ; 拼音词库设置，五笔用户 *不需要* 此行设置
            (pyim-basedict-enable)   ; 拼音词库，五笔用户 *不需要* 此行设置
            (setq default-input-method "pyim")
       #+END_EXAMPLE

****** [[#配置][]] 配置
******* [[#配置实例][]] 配置实例
    对 pyim 感兴趣的同学，可以看看本人的 pyim 配置（总是适用于最新版的 pyim）:

    #+BEGIN_EXAMPLE
         (use-package pyim
          :ensure nil
          :demand t
          :config
          ;; 激活 basedict 拼音词库，五笔用户请继续阅读 README
          (use-package pyim-basedict
            :ensure nil
            :config (pyim-basedict-enable))

          (setq default-input-method "pyim")

          ;; 我使用全拼
          (setq pyim-default-scheme 'quanpin)

          ;; 设置 pyim 探针设置，这是 pyim 高级功能设置，可以实现 *无痛* 中英文切换 :-)
          ;; 我自己使用的中英文动态切换规则是：
          ;; 1. 光标只有在注释里面时，才可以输入中文。
          ;; 2. 光标前是汉字字符时，才能输入中文。
          ;; 3. 使用 M-j 快捷键，强制将光标前的拼音字符串转换为中文。
          (setq-default pyim-english-input-switch-functions
                        '(pyim-probe-dynamic-english
                          pyim-probe-isearch-mode
                          pyim-probe-program-mode
                          pyim-probe-org-structure-template))

          (setq-default pyim-punctuation-half-width-functions
                        '(pyim-probe-punctuation-line-beginning
                          pyim-probe-punctuation-after-punctuation))

          ;; 开启拼音搜索功能
          (pyim-isearch-mode 1)

          ;; 使用 popup-el 来绘制选词框, 如果用 emacs26, 建议设置
          ;; 为 'posframe, 速度很快并且菜单不会变形，不过需要用户
          ;; 手动安装 posframe 包。
          ;; (setq pyim-page-tooltip 'posframe)
          (setq pyim-page-tooltip 'popup)

          ;; 选词框显示5个候选词
          (setq pyim-page-length 5)

          :bind
          (("M-j" . pyim-convert-string-at-point) ;与 pyim-probe-dynamic-english 配合
           ("C-;" . pyim-delete-word-from-personal-buffer)))
    #+END_EXAMPLE

******* [[#添加词库文件][]] 添加词库文件
        pyim 当前的默认的拼音词库是 pyim-basedict, 这个词库的词条量 8 万左右，是
        一个 *非常小* 的拼音词库，词条的来源有两个：

    1. libpinyin 项目的内置词库
    2. pyim 用户贡献的个人词库

    如果 pyim-basedict 不能满足需求，用户可以使用其他方式为 pyim 添加拼音词库，具体方式请参考 [[#org1b350d2][1.10.8]] 小结。

******* [[#激活-pyim][]] 激活 pyim

    #+BEGIN_EXAMPLE
         (setq default-input-method "pyim")
        (global-set-key (kbd "C-\\") 'toggle-input-method)
    #+END_EXAMPLE

****** [[#使用][]] 使用
******* [[#常用快捷键][]] 常用快捷键
    | 输入法快捷键           | 功能                         |
    |------------------------+------------------------------|
    | C-n 或 M-n 或 + 或 .   | 向下翻页                     |
    | C-p 或 M-p 或 - 或 ,   | 向上翻页                     |
    | C-f                    | 选择下一个备选词             |
    | C-b                    | 选择上一个备选词             |
    | SPC                    | 确定输入                     |
    | RET 或 C-m             | 字母上屏                     |
    | C-c                    | 取消输入                     |
    | C-g                    | 取消输入并保留已输入的中文   |
    | TAB                    | 模糊音调整                   |
    | DEL 或 BACKSPACE       | 删除最后一个字符             |
    | C-DEL 或 C-BACKSPACE   | 删除最后一个拼音             |
    | M-DEL 或 M-BACKSPACE   | 删除最后一个拼音             |

******* [[#使用双拼模式][]] 使用双拼模式
    pyim 支持双拼输入模式，用户可以通过变量 `pyim-default-scheme' 来设定：

    #+BEGIN_EXAMPLE
         (setq pyim-default-scheme 'pyim-shuangpin)
    #+END_EXAMPLE

    注意：
    1. pyim 支持微软双拼（microsoft-shuangpin）和小鹤双拼（xiaohe-shuangpin）。
    2. 用户可以使用函数 `pyim-scheme-add' 添加自定义双拼方案。
    3. 用户可能需要重新设置 `pyim-translate-trigger-char'。

******* [[#通过-pyim-来支持-rime-所有输入法][]] 通过 pyim 来支持 rime 所有输入法
    1. 安裝配置 liberime 和 pyim, 方式见： [[https://github.com/merrickluo/liberime][liberime]].

    2. 使用 rime 全拼输入法的用户，也可以使用 rime-quanpin scheme, 这个 scheme 是专门针对 rime 全拼输入法定制的，支持全拼 v 快捷键。

       #+BEGIN_EXAMPLE
            (setq pyim-default-scheme 'rime-quanpin)
       #+END_EXAMPLE

    3. 如果通过 rime 使用微软双拼，可以用以下设置：

       #+BEGIN_EXAMPLE
            (liberime-select-schema "double_pinyin_mspy")
           (setq pyim-default-scheme 'rime-microsoft-shuangpin)
       #+END_EXAMPLE

       默认是用繁体中文，想要改成简体中文的话，可以参考 [[https://github.com/rime/home/wiki/CustomizationGuide#%E4%B8%80%E4%BE%8B%E5%AE%9A%E8%A3%BD%E7%B0%A1%E5%8C%96%E5%AD%97%E8%BC%B8%E5%87%BA][rime wiki]]，或者 [[http://wenshanren.org/?p=1070#orgc7dbd8e][这篇博客]]

******* [[#使用五笔输入][]] 使用五笔输入


    pyim 支持五笔输入模式，用户可以通过变量 `pyim-default-scheme' 来设定：

    #+BEGIN_EXAMPLE
         (setq pyim-default-scheme 'wubi)
    #+END_EXAMPLE

    在使用五笔输入法之前，请用 pyim-dicts-manager 添加一个五笔词库，词库的格式类似：

    #+BEGIN_EXAMPLE
         # ;;; -*- coding: utf-8-unix -*-
        .aaaa 工
        .aad 式
        .aadk 匿
        .aadn 慝 葚
        .aadw 萁
        .aafd 甙
        .aaff 苷
        .aaht 芽
        .aak 戒
    #+END_EXAMPLE

    最简单的方式是从 melpa 中安装 pyim-wbdict 包，然后根据它的 [[https://github.com/tumashu/pyim-wbdict][README]] 来配置。

    另外 Ye FeiYu 同学维护着 pyim-wbdict 的一个 fork, 里面包含着极点五笔和清歌五笔的词库，不做发布，有兴趣的同学可以了解一下：

    [[https://github.com/yefeiyu/pyim-wbdict]]

    如果用户在使用五笔输入法的过程中，忘记了某个字的五笔码，可以按 TAB 键临时切换到辅助输入法来输入，选词完成之后自动退出。辅助输入法可以通过 `pyim-assistant-scheme' 来设置。

    <<user-content-org4a6c079>>

******* [[#使用仓颉输入法][]] 使用仓颉输入法
    pyim 支持仓颉输入法，用户可以通过变量 `pyim-default-scheme' 来设定：

    #+BEGIN_EXAMPLE
         (setq pyim-default-scheme 'cangjie)
    #+END_EXAMPLE

    在使用仓颉输入法之前，请用 pyim-dicts-manager 添加一个仓颉词库，词库的格式类似：

    #+BEGIN_EXAMPLE
         # ;;; -*- coding: utf-8-unix -*-
        @a 日
        @a 曰
        @aa 昌
        @aa 昍
        @aaa 晶
        @aaa 晿
        @aaah 曑
    #+END_EXAMPLE

    如果用户使用仓颉第五代，最简单的方式是从 melpa 中安装 pyim-cangjie5dict 包，然后根据它的 [[https://github.com/erstern/pyim-cangjie5dict][README]] 来配置。 pyim 支持其它版本的仓颉，但需要用户自己创建词库文件。

    用户可以使用命令：`pyim-search-word-code' 来查询当前选择词条的仓颉编码

    <<user-content-org7368772>>

******* [[#让选词框跟随光标][]] 让选词框跟随光标
    用户可以通过下面的设置让 pyim 在 *光标处* 显示一个选词框：

    1. 使用 popup 包来绘制选词框 （emacs overlay 机制）

       #+BEGIN_EXAMPLE
            (setq pyim-page-tooltip 'popup)
       #+END_EXAMPLE

    2. 使用 posframe 来绘制选词框

       #+BEGIN_EXAMPLE
            (setq pyim-page-tooltip 'posframe)
       #+END_EXAMPLE

       注意：pyim 不会自动安装 posframe, 用户需要手动安装这个包，
******* [[#调整-tooltip-选词框的显示样式][]] 调整 tooltip 选词框的显示样式


    pyim 的 tooltip 选词框默认使用 *双行显示* 的样式，在一些特殊的情况下（比如：popup 显示的菜单错位），用户可以使用 *单行显示* 的样式：

    #+BEGIN_EXAMPLE
         (setq pyim-page-style 'one-line)
    #+END_EXAMPLE

    注：用户可以添加函数 pyim-page-style:STYLENAME 来定义自己的选词框格式。

    <<user-content-org3b72885>>

******* [[#设置模糊音][]] 设置模糊音
    可以通过设置 `pyim-fuzzy-pinyin-alist' 变量来自定义模糊音。
******* [[#使用魔术转换器][]] 使用魔术转换器
    用户可以将待选词条作 “特殊处理” 后再 “上屏”，比如 “简体转繁体” 或者 “输入中文，上屏英文” 之类的。

    用户需要设置 `pyim-magic-converter', 比如：下面这个例子实现，输入 “二呆”，“一个超级帅的小伙子” 上屏 :-)

    #+BEGIN_EXAMPLE
         (defun my-converter (string)
          (if (equal string "二呆")
              "“一个超级帅的小伙子”"
            string))
        (setq pyim-magic-converter #'my-converter)
    #+END_EXAMPLE

    <<user-content-org56fe195>>

******* [[#切换全角标点与半角标点][]] 切换全角标点与半角标点


    1. 第一种方法：使用命令 `pyim-punctuation-toggle'，全局切换。这个命令主要用来设置变量： `pyim-punctuation-translate-p', 用户也可以手动设置这个变量， 比如：

       #+BEGIN_EXAMPLE
            (setq pyim-punctuation-translate-p '(yes no auto))   ;使用全角标点。
           (setq pyim-punctuation-translate-p '(no yes auto))   ;使用半角标点。
           (setq pyim-punctuation-translate-p '(auto yes no))   ;中文使用全角标点，英文使用半角标点。
       #+END_EXAMPLE

    2. 第二种方法：使用命令 `pyim-punctuation-translate-at-point' 只切换光标处标点的样式。

    3. 第三种方法：设置变量 `pyim-translate-trigger-char' ，输入变量设定的字符会切换光标处标点的样式。

    <<user-content-org177eda0>>

******* [[#手动加词和删词][]] 手动加词和删词
    1. `pyim-create-Ncchar-word-at-point 这是一组命令，从光标前提取 N 个汉字字符组成字符串，并将其加入个人词库。
    2. `pyim-translate-trigger-char' 以默认设置为例：在“我爱吃红烧肉”后输入“5v” 可以将“爱吃红烧肉”这个词条保存到用户个人词库。
    3. `pyim-create-word-from-selection', 选择一个词条，运行这个命令后，就可以将这个词条添加到个人词库。
    4. `pyim-delete-word' 从个人词库中删除当前高亮选择的词条。

******* [[#pyim-高级功能][]] pyim 高级功能

    1. 根据环境自动切换到英文输入模式，使用 pyim-english-input-switch-functions 配置。
    2. 根据环境自动切换到半角标点输入模式，使用 pyim-punctuation-half-width-functions 配置。

    注意：上述两个功能使用不同的变量设置， *千万不要搞错* 。

    1. 根据环境自动切换到英文输入模式

       | 探针函数                            | 功能说明                                                                            |
       |-------------------------------------+-------------------------------------------------------------------------------------|
       | pyim-probe-program-mode             | 如果当前的 mode 衍生自 prog-mode，那么仅仅在字符串和 comment 中开启中文输入模式     |
       | pyim-probe-org-speed-commands       | 解决 org-speed-commands 与 pyim 冲突问题                                            |
       | pyim-probe-isearch-mode             | 使用 isearch 搜索时，强制开启英文输入模式                                           |
       |                                     | 注意：想要使用这个功能，pyim-isearch-mode 必须激活                                  |
       | pyim-probe-org-structure-template   | 使用 org-structure-template 时，关闭中文输入模式                                    |
       |                                     | 1. 当前字符为中文字符时，输入下一个字符时默认开启中文输入                           |
       | pyim-probe-dynamic-english          | 2. 当前字符为其他字符时，输入下一个字符时默认开启英文输入                           |
       |                                     | 3. 使用命令 pyim-convert-string-at-point 可以将光标前的拼音字符串强制转换为中文。   |

       激活方式：

       #+BEGIN_EXAMPLE
            (setq-default pyim-english-input-switch-functions
                         '(probe-function1 probe-function2 probe-function3))
       #+END_EXAMPLE

       注意事项：

       1. 上述函数列表中，任意一个函数的返回值为 t 时，pyim 切换到英文输入模式。
       2. [[https://github.com/DogLooksGood/emacs-rime][Emacs-rime]] 和 [[https://github.com/laishulu/emacs-smart-input-source][smart-input-source]] 也有类似探针的功能，其对应函数可以直接或者简单包装后作为 pyim 探针使用，有兴趣的同学可以了解一下。

    2. 根据环境自动切换到半角标点输入模式

       | 探针函数                                   | 功能说明                     |
       |--------------------------------------------+------------------------------|
       | pyim-probe-punctuation-line-beginning      | 行首强制输入半角标点         |
       | pyim-probe-punctuation-after-punctuation   | 半角标点后强制输入半角标点   |

       激活方式：

       #+BEGIN_EXAMPLE
            (setq-default pyim-punctuation-half-width-functions
                         '(probe-function4 probe-function5 probe-function6))
       #+END_EXAMPLE

       注：上述函数列表中，任意一个函数的返回值为 t 时，pyim 切换到半角标点输入模式。

    <<user-content-org2482eb9>>

****** [[#捐赠][]] 捐赠
    您可以通过小额捐赠的方式支持 pyim 的开发工作，具体方式：

    1. 通过支付宝收款账户： [[mailto:tumashu@163.com][tumashu@163.com]]

    2. 通过支付宝钱包扫描：

       [[/tumashu/pyim/blob/master/snapshots/QR-code-for-author.jpg][[[/tumashu/pyim/raw/master/snapshots/QR-code-for-author.jpg]]]]

****** [[#tips][]] Tips


    <<user-content-org1719542>>

******* [[#关闭输入联想词功能-默认开启][]] 关闭输入联想词功能 (默认开启)


    #+BEGIN_EXAMPLE
         (setq pyim-enable-shortcode nil)
    #+END_EXAMPLE

    <<user-content-org1258502>>

******* [[#如何将个人词条相关信息导入和导出][]] 如何将个人词条相关信息导入和导出？


    1. 导入使用命令： pyim-import
    2. 导出使用命令： pyim-export

    <<user-content-org57aa8af>>

******* [[#pyim-出现错误时如何开启-debug-模式][]] pyim 出现错误时，如何开启 debug 模式


    #+BEGIN_EXAMPLE
         (setq debug-on-error t)
    #+END_EXAMPLE

    <<user-content-org4498681>>

******* [[#如何查看-pyim-文档][]] 如何查看 pyim 文档。


    pyim 的文档隐藏在 comment 中，如果用户喜欢阅读 html 格式的文档，可以查看在线文档；

    [[http://tumashu.github.io/pyim/]]

    <<user-content-org45b805f>>

******* [[#将光标处的拼音或者五笔字符串转换为中文-与-vimim-的-点石成金-功能类似][]] 将光标处的拼音或者五笔字符串转换为中文 (与 vimim 的 “点石成金” 功能类似)


    #+BEGIN_EXAMPLE
         (global-set-key (kbd "M-i") 'pyim-convert-string-at-point)
    #+END_EXAMPLE

    <<user-content-org458f055>>

******* [[#如何使用其它字符翻页][]] 如何使用其它字符翻页


    #+BEGIN_EXAMPLE
         (define-key pyim-mode-map "." 'pyim-page-next-page)
        (define-key pyim-mode-map "," 'pyim-page-previous-page)
    #+END_EXAMPLE

    <<user-content-org6119ede>>

******* [[#如何用--来选择第二个候选词][]] 如何用 ";" 来选择第二个候选词


    #+BEGIN_EXAMPLE
         (define-key pyim-mode-map ";"
          (lambda ()
            (interactive)
            (pyim-page-select-word-by-number 2)))
    #+END_EXAMPLE

    <<user-content-org1b350d2>>

******* [[#如何添加自定义拼音词库][]] 如何添加自定义拼音词库


    pyim 默认没有携带任何拼音词库，用户可以使用下面几种方式，获取质量较好的拼音词库：

    1. 第一种方式 (懒人推荐使用)

       获取其他 pyim 用户的拼音词库，比如，某个同学测试 pyim 时创建了一个中文拼音词库，词条数量大约 60 万。

       [[http://tumashu.github.io/pyim-bigdict/pyim-bigdict.pyim.gz]]

       下载上述词库后，运行 `pyim-dicts-manager' ，按照命令提示，将下载得到的词库文件信息添加到 `pyim-dicts' 中，最后运行命令 `pyim-restart' 或者重启 emacs，这个词库使用 `utf-8-unix' 编码。

    2. 第二种方式 (Windows 用户推荐使用)

       使用词库转换工具将其他输入法的词库转化为 pyim 使用的词库：这里只介绍 windows 平台下的一个词库转换软件：

       1. 软件名称： imewlconverter
       2. 中文名称： 深蓝词库转换
       3. 下载地址： [[https://github.com/studyzy/imewlconverter]]
       4. 依赖平台： Microsoft .NET Framework (>= 3.5)

       使用方式：

       [[/tumashu/pyim/blob/master/snapshots/imewlconverter-basic.gif][[[/tumashu/pyim/raw/master/snapshots/imewlconverter-basic.gif]]]]

       如果生成的词库词频不合理，可以按照下面的方式处理（非常有用的功能）：

       [[/tumashu/pyim/blob/master/snapshots/imewlconverter-wordfreq.gif][[[/tumashu/pyim/raw/master/snapshots/imewlconverter-wordfreq.gif]]]]

       生成词库后，运行 `pyim-dicts-manager' ，按照命令提示，将转换得到的词库文件的信息添加到 `pyim-dicts' 中，完成后运行命令 `pyim-restart' 或者重启 emacs。

    3. 第三种方式 (Linux & Unix 用户推荐使用)

       E-Neo 同学编写了一个词库转换工具: [[https://github.com/E-Neo/scel2pyim][scel2pyim]] , 可以将一个搜狗词库转换为 pyim 词库。

       1. 软件名称： scel2pyim
       2. 下载地址： [[https://github.com/E-Neo/scel2pyim]]
       3. 编写语言： C 语言

    <<user-content-orgb999ecf>>

******* [[#如何手动安装和管理词库][]] 如何手动安装和管理词库


    这里假设有两个词库文件：

    1. /path/to/pyim-dict1.pyim
    2. /path/to/pyim-dict2.pyim

    在~/.emacs 文件中添加如下一行配置。

    #+BEGIN_EXAMPLE
         (setq pyim-dicts
              '((:name "dict1" :file "/path/to/pyim-dict1.pyim")
                (:name "dict2" :file "/path/to/pyim-dict2.pyim")))
    #+END_EXAMPLE

    注意事项:

    1. 只有 :file 是 *必须* 设置的。
    2. 必须使用词库文件的绝对路径。
    3. 词库文件的编码必须为 utf-8-unix，否则会出现乱码。

    <<user-content-orgeeaedec>>

******* [[#emacs-启动时加载-pyim-词库][]] Emacs 启动时加载 pyim 词库


    #+BEGIN_EXAMPLE
         (add-hook 'emacs-startup-hook
                  #'(lambda () (pyim-restart-1 t)))
    #+END_EXAMPLE

    <<user-content-org34b8215>>

******* [[#将汉字字符串转换为拼音字符串][]] 将汉字字符串转换为拼音字符串


    下面两个函数可以将中文字符串转换的拼音字符串或者列表，用于 emacs-lisp 编程。

    1. `pyim-hanzi2pinyin' （考虑多音字）
    2. `pyim-hanzi2pinyin-simple' （不考虑多音字）

    <<user-content-org489e173>>

******* [[#中文分词][]] 中文分词


    pyim 包含了一个简单的分词函数：`pyim-cstring-split-to-list', 可以将一个中文字符串分成一个词条列表，比如：

    #+BEGIN_EXAMPLE
                           (("天安" 5 7)
        我爱北京天安门 ->  ("天安门" 5 8)
                           ("北京" 3 5)
                           ("我爱" 1 3))
    #+END_EXAMPLE

    其中，每一个词条列表中包含三个元素，第一个元素为词条本身，第二个元素为词条相对于字符串的起始位置，第三个元素为词条结束位置。

    另一个分词函数是 `pyim-cstring-split-to-string', 这个函数将生成一个新的字符串，在这个字符串中，词语之间用空格或者用户自定义的分隔符隔开。

    注意，上述两个分词函数使用暴力匹配模式来分词，所以， *不能检测出* pyim 词库中不存在的中文词条。

    <<user-content-org0f535fb>>

******* [[#获取光标处的中文词条][]] 获取光标处的中文词条


    pyim 包含了一个简单的命令：`pyim-cwords-at-point', 这个命令可以得到光标处的 *英文* 或者 *中文* 词条的 *列表*，这个命令依赖分词函数： `pyim-cstring-split-to-list'。

    <<user-content-org421207e>>

******* [[#让-forward-word-和-back-backward-在中文环境下正常工作][]] 让 `forward-word' 和 `back-backward' 在中文环境下正常工作


    中文词语没有强制用空格分词，所以 Emacs 内置的命令 `forward-word' 和 `backward-word' 在中文环境不能按用户预期的样子执行，而是 forward/backward “句子” ，pyim 自带的两个命令可以在中文环境下正常工作：

    1. `pyim-forward-word
    2. `pyim-backward-word

    用户只需将其绑定到快捷键上就可以了，比如：

    #+BEGIN_EXAMPLE
         (global-set-key (kbd "M-f") 'pyim-forward-word)
        (global-set-key (kbd "M-b") 'pyim-backward-word)
    #+END_EXAMPLE

    <<user-content-orgfbb740c>>

******* [[#为-isearch-相关命令添加拼音搜索支持][]] 为 isearch 相关命令添加拼音搜索支持


    pyim 安装后，可以通过下面的设置开启拼音搜索功能：

    #+BEGIN_EXAMPLE
         (pyim-isearch-mode 1)
    #+END_EXAMPLE

    注意：这个功能有一些限制，搜索字符串中只能出现 “a-z” 和 “'”，如果有其他字符（比如 regexp 操作符），则自动关闭拼音搜索功能。

    开启这个功能后，一些 isearch 扩展有可能失效，如果遇到这种问题，只能禁用这个 Minor-mode，然后联系 pyim 的维护者，看有没有法子实现兼容。

    用户激活这个 mode 后，可以使用下面的方式 *强制关闭* isearch 搜索框中文输入（即使在 pyim 激活的时候）。

    #+BEGIN_EXAMPLE
         (setq-default pyim-english-input-switch-functions
                      '(pyim-probe-isearch-mode))
    #+END_EXAMPLE
** emoji 
** git
*** git 层快捷键    
    | ~SPC g /~   | open =helm-git-grep=                             |
    | ~SPC g *~   | open =helm-git-grep-at-point=                    |
    | ~SPC g b~   | 打开 blame   (版本变迁明细)                      |
    | ~SPC g f f~ | 看一些修改过的文件列表(  版本处理)               |
    | ~SPC g M~   | 显示当前行的提交信息                             |
    | ~SPC g i~   | 版本初始化                                       |
    | ~SPC g S~   | stage current file                               |
    | ~SPC g U~   | unstage current file                             |
    | ~SPC g f l~ | 当前文件的提交记录                               |
    | ~SPC g f d~ | 当前文件的版本差异                               |
    | ~SPC g H c~ | clear highlights        (高亮处理)               |
    | ~SPC g H h~ | 修改的地方高亮                                   |
    | ~SPC g H t~ | 反向高亮                                         |
    | ~SPC g I~   | open =helm-gitignore= (打开忽略文件，不起作用么) |
    | ~SPC g L~   | open magit-repolist  打开版本控制的仓库          |
    | ~SPC g t~   | 打开 git time machine                            |

*** magit 管理窗口  ~SPC g s~ 或者 ~SPC g m~
    | ~/~       | 快捷查找                                        |
    | ~$~       | 打开命令执行历史 buffer                         |
    | ~c c~     | 发布提交消息缓冲 open a =commit message buffer= |
    | ~b b~     | checkout a branch                               |
    | ~b c~     | create a branch                                 |
    | ~f f~     | fetch changes                                   |
    | ~F (r) u~ | 拉取 /变基 pull tracked branch and rebase       |
    | ~gr~      | 刷新 refresh                                    |
    | ~l l~     | 打开日志缓存 open =log buffer=                  |
    | ~o~       | 数据恢复到某个节点                              |
    | ~P u~     | 发布 push to tracked branch                     |
    | ~s~       | 暂存,在 diff 中，还能暂存特定行                 |
    | ~x~       | 丢弃更改                                        |
    | ~S~       | 暂存全部                                        |
    | ~TAB~     | 查看文件改动 (diff)                             |
    | ~u~       | 取消暂存                                        |
    | ~U~       | 取消所有的暂存                                  |
    | ~v or V~  | select multiple lines                           |
    | ~z z~     | 隐藏改动                                        |

    写提交消息的 buff 中，按 ~M-n~ ,~M-p~  可以上下遍历历史提交信息

*** 远程日志
    | ~SPC g l c~ | on a commit hash, browse to the current file at this commit                                   |
    | ~SPC g l C~ | on a commit hash, create link to the file at this commit and copy it                          |
    | ~SPC g l l~ | 在 远程（如 github) 中 打开记录行                                                             |
    | ~SPC g l L~ | 拷贝上面的远程行 链接                                                                         |
    | ~SPC g l p~ | on a region, browse to file at current lines position (using permalink link)                  |
    | ~SPC g l P~ | on a region, create a link to the file highlighting the selected lines (using permalink link) |

** github
** cmake
   此层主要 使用 *cmake-ide* 的集成功能 ，支持 cmake  项目和 非 cmake 项目，在 CMake 脚本文件是项目的依赖配置。 
  
   保存文件自动重新运行 *cmake* ，要设置 ~cmake-ide-build-dir~ 
   ~cmake-ide-delete-file~ 后需要手动运行 *cmake*
  
   默认生成的是临时目录，可以设置永久的 cmake-ide-build-pool-dir 和
   cmake-ide-build-pool-use-persistent-naming .
  
   非 cmake 项目 ，可以设置本地变量 !!!!  
   #+begin_quote
   .dir-locals.el: ((nil . ((cmake-ide-build-dir . "/path/to/build/dir") (cmake-ide-project-dir . "/path/to/project/dir"))))
   #+end_quote
   假如在 ~cmake-ide-build-dir~ 目录存在 ~compile_commands.json~ 文件 ，那么也可以
   编译。此文件可以用 ~Bear~ 工具生成。
 
   总结： 编译的化运行 ~,  c c~  
 
** google translate
   | 反向翻译 | google-translate-query-translate-reverse                                    |
   | 支持列表 | google-translate-supported-languages                                        |

   定义输出方向 
   google-translate-output-destination
   - nil  弹出缓冲区
   - echo-area
   - popup  弹出窗口
   - kill-ring 
** helm 
   调整 helm 缓冲区尺寸
   #+BEGIN_SRC emacs-lisp
     (setq-default dotspacemacs-configuration-layers '(
                                                       (helm :variables helm-enable-auto-resize t)))
   #+END_SRC

   #+begin_verse
   查找,@@html:<kbd>@@ SPC / @@html:</kbd>@@ 
   直接在搜索到的内容里改结果，就不用转到文件了 。 ~C-c C-e~
   到父一层目录查找，范围更广了 ~C-l~
   启动瞬态 ~M-SPC~
   #+end_verse
      
   书签管理 
   | ~C-d~ |删除|
   | ~C-e~ | 编辑                   |
   | ~C-f~ | 是否显示文件名位置                     |
   | ~C-o~ | open the selected bookmark in another window |

   helm-swoop,显示实时的搜索缓冲区, ~SPC s s~,觉得也没啥用
       
   对于通用参数，用法是,先选择函数，然后按 ~C-u~,最后按 ~RET~ 
   实例 : ~SPC SPC org-reload C-u RET~
       
   多个文件替换，只要 ~C-c C-e~,然后进入 ~iedit state~ 模式(~SPC s e~)
       
   回到 helm-buffer ,快捷键是 ~SPC r l~
   
   helm 中排除某 STRING  !STRING
** html 
   emmet-mode ，本来叫 Zen Coding(禅码)，后改叫 Emmet  (一种实用工具厂商吧)， 功能是输入缩略词自动生成补全的 html css 片段
   #+begin_quote
   感觉用 auto-complete 好些，这个要记忆
   #+end_quote
*** 编译 Less
    C-c C-c         less-css-compile
    C-M-q           prog-indent-sexp

*** 缩略补全 C-j 扩展
    - HTML abbreviations
      - Basic tags
        a                       <a href=""></a>
        a.x                    <a class="x" href=""></a>
        a#q.x               <a id="q" class="x" href=""></a>
        a#q.x.y.z          <a id="q" class="x y z" href=""></a>
        #q                     <div id="q"> </div>
        .x                       <div class="x"> </div>
        #q.x                   <div id="q" class="x"> </div>
        #q.x.y.z              <div id="q" class="x y z"> </div>
      - Empty tags
        a/                       <a href=""/>
        a/.x                     <a class="x" href=""/>
        a/#q.x                   <a id="q" class="x" href=""/>
        a/#q.x.y.z               <a id="q" class="x y z" href=""/>
        Self-closing tags
        input[type=text]         <input type="text" name="" value=""/>
        img                      <img src="" alt=""/>
        img>metadata/*2          <img src="" alt=""> <metadata/> <metadata/> </img>
      - Siblings
        a+b                      <a href=""></a> <b></b>
        a+b+c                    <a href=""></a> <b></b> <c></c>
        a.x+b                    <a class="x" href=""></a> <b></b>
        a#q.x+b                  <a id="q" class="x" href=""></a> <b></b>
        a#q.x.y.z+b              <a id="q" class="x y z" href=""></a> <b></b>
        a#q.x.y.z+b#p.l.m.n      <a id="q" class="x y z" href=""></a> <b id="p" class="l m n"></b>
      - Tag expansion
        table+                   <table> <tr> <td> </td> </tr> </table>
        dl+                      <dl> <dt></dt> <dd></dd> </dl>
        ul+                      <ul> <li></li> </ul>
        ul++ol+                  <ul> <li></li> </ul> <ol> <li></li> </ol>
        ul#q.x.y[m=l]            <ul id="q" class="x y" m="l"> <li></li> </ul>
      - Parent > child
        a>b                      <a href=""><b></b></a>
        a>b>c                    <a href=""><b><c></c></b></a>
        a.x>b                    <a class="x" href=""><b></b></a>
        a#q.x>b                  <a id="q" class="x" href=""><b></b></a>
        a#q.x.y.z>b              <a id="q" class="x y z" href=""><b></b></a>
        a#q.x.y.z>b#p.l.m.n      <a id="q" class="x y z" href=""><b id="p" class="l m n"></b></a>
        #q>.x                    <div id="q"> <div class="x"> </div> </div>
        a>b+c                    <a href=""> <b></b> <c></c> </a>
        a>b+c>d                  <a href=""> <b></b> <c><d></d></c> </a>
      - Climb-up
        a>b^c                    <a href=""><b></b></a><c></c>
        a>b>c^d                  <a href=""> <b><c></c></b> <d></d> </a>
        a>b>c^^d                 <a href=""><b><c></c></b></a> <d></d>
      - Multiplication
        a*1                      <a href=""></a>
        a*2                      <a href=""></a> <a href=""></a>
        a/*2                     <a href=""/> <a href=""/>
        a*2+b*2                  <a href=""></a> <a href=""></a> <b></b> <b></b>
        a*2>b*2                  <a href=""> <b></b> <b></b> </a> <a href=""> <b></b> <b></b> </a>
        a>b*2                    <a href=""> <b></b> <b></b> </a>
        a#q.x>b#q.x*2            <a id="q" class="x" href=""> <b id="q" class="x"></b> <b id="q" class="x"></b> </a>
        a#q.x>b/#q.x*2           <a id="q" class="x" href=""> <b id="q" class="x"/> <b id="q" class="x"/> </a>
      - Item numbering
        ul>li.item$*3            <ul> <li class="item1"></li> <li class="item2"></li> <li class="item3"></li> </ul>
        ul>li.item$$$*3          <ul> <li class="item001"></li> <li class="item002"></li> <li class="item003"></li> </ul>
        ul>li.item$@-*3          <ul> <li class="item3"></li> <li class="item2"></li> <li class="item1"></li> </ul>
        ul>li.item$@3*3          <ul> <li class="item3"></li> <li class="item4"></li> <li class="item5"></li> </ul>
        ul>li.item$@-3*3         <ul> <li class="item5"></li> <li class="item4"></li> <li class="item3"></li> </ul>
        a$b$@-/*5                <a1b5/> <a2b4/> <a3b3/> <a4b2/> <a5b1/>
        a.$*2>b.$$@-*3           <a class=\"1\" href=""> <b class=\"03\"></b> <b class=\"02\"></b> <b class=\"01\"></b> </a> <a class=\"2\" href=""> <b class=\"03\"></b> <b class=\"02\"></b> <b class=\"01\"></b> </a>
      - Properties
        b[x]                     <b x=""></b>
        b[x=]                    <b x=""></b>
        b[x=""]                  <b x=""></b>
        b[x=y]                   <b x="y"></b>
        b[x="y"]                 <b x="y"></b>
        b[x="()"]                <b x="()"></b>
        b[x m]                   <b x="" m=""></b>
        b[x= m=""]               <b x="" m=""></b>
        b[x=y m=l]               <b x="y" m="l"></b>
        b/[x=y m=l]              <b x="y" m="l"/>
        b#foo[x=y m=l]           <b id="foo" x="y" m="l"></b>
        b.foo[x=y m=l]           <b class="foo" x="y" m="l"></b>
        b#foo.bar.mu[x=y m=l]    <b id="foo" class="bar mu" x="y" m="l"></b>
        b/#foo.bar.mu[x=y m=l]   <b id="foo" class="bar mu" x="y" m="l"/>
        b[x=y]+b                 <b x="y"></b> <b></b>
        b[x=y]+b[x=y]            <b x="y"></b> <b x="y"></b>
        b[x=y]>b                 <b x="y"><b></b></b>
        b[x=y]>b[x=y]            <b x="y"><b x="y"></b></b>
        b[x=y]>b[x=y]+c[x=y]     <b x="y"> <b x="y"></b> <c x="y"></c> </b>
      - Parentheses
        (a)                      <a href=""></a>
        (a)+(b)                  <a href=""></a> <b></b>
        a>(b)                    <a href=""><b></b></a>
        (a>b)>c                  <a href=""><b></b></a>
        (a>b)+c                  <a href=""><b></b></a> <c></c>
        z+(a>b)+c+k              <z></z> <a href=""><b></b></a> <c></c> <k></k>
        (x)*2                    <x></x> <x></x>
        ((x)*2)                  <x></x> <x></x>
        ((x))*2                  <x></x> <x></x>
        (x>b)*2                  <x><b></b></x> <x><b></b></x>
        (x+b)*2                  <x></x> <b></b> <x></x> <b></b>
      - Text
        a{Click me}              <a href="">Click me</a>
        a>{Click me}*2           <a href=""> Click me Click me </a>
        x{click}+b{here}         <x>click</x> <b>here</b>
        span>{click}+b{here}     <span> click <b>here</b> </span>
        p>{Click}+span{here}+{ to continue} <p> Click <span>here</span> to continue </p>
        p{Click}+span{here}+{ to continue} <p> Click </p> <span>here</span> to continue
      - Filter: HTML with comments
        a.b|c                    <!-- .b --> <a class="b" href=""></a> <!-- /.b -->
        #a>.b|c                  <!-- #a --> <div id="a"> <!-- .b --> <div class="b"> </div> <!-- /.b --> </div> <!-- /#a -->
      - Lorem ipsum (生成一段虚拟文本)
    - CSS abbreviations
      - Basic Usage
        - p1-2!+m10e+bd1#2s        padding: 1px 2px !important; margin: 10em; border: 1px #222 solid;
      - Keywords
        m                        margin: ;
        bg+                      background: #fff url() 0 0 no-repeat;
        c                        color: #000;
** imenu-list 
** import-js  [导入模块，并导航代码]
   安装  
   #+BEGIN_SRC sh
     $ npm install -g import-js
   #+END_SRC
   如果这不起作用,可以用下面方式 
   #+BEGIN_SRC sh
     $ sudo npm install --unsafe-perm -g import-js
   #+END_SRC

   启用，在 javascript 配置 
   #+BEGIN_SRC elisp
     (javascript :variables javascript-import-tool 'import-js)
   #+END_SRC
   然后，层 ~react~  和 ~typescript~ 也有此特性

   | ~SPC m i i~ | 导入光标下变量对应的模块                 |
   | ~SPC m i f~ | 导入任何缺少的模块并删除任何未使用的模块 |
   | ~SPC m i g~ | 转到光标下的变量模块                     |

** javascript
   启用 导入帮助程序(~ImportJS~) 
   #+begin_src sh
     $ npm install -g import-js
   #+end_src
  
   flycheck 错误检查
   #+BEGIN_SRC sh
     $ npm install -g eslint
     # or
     $ npm install -g jshint
   #+END_SRC

   如果安装在非标准目录中，请添加该目录
   #+BEGIN_SRC elisp
     (add-to-list 'exec-path "/path/to/node/bins" t)
   #+END_SRC

   美化 
   添加  ~web-beautify~ ，或 ~prettier~ 层，参考层文档

   import-js，导入模块，并导航代码
   #+BEGIN_SRC elisp
     (javascript :variables javascript-import-tool 'import-js)
   #+END_SRC
   | ~SPC m i i~ | 导入光标下变量对应的模块                 |
   | ~SPC m i f~ | 导入任何缺少的模块并删除任何未使用的模块 |
   | ~SPC m g i~ | 转到光标下变量对应的模块                 |

   选择后端 
   #+BEGIN_SRC elisp
     (javascript :variables javascript-backend 'tern)
   #+END_SRC

   或者本地变量 =.dir-locals.el=
   #+BEGIN_SRC elisp
     ((js2-mode (javascript-backend . lsp)))
   #+END_SRC

   选择格式化程序
   #+BEGIN_SRC elisp
     (javascript :variables javascript-fmt-tool 'web-beautify)
   #+END_SRC

   或者本地变量 =.dir-locals.el=
   #+BEGIN_SRC elisp
     ((js2-mode (javascript-fmt-tool . prettier)))
   #+END_SRC

   调试器（dap 集成）
   安装 =M-x dap-firefox-setup= 

   调整缩进，设置变量
   #+BEGIN_SRC emacs-lisp
     (setq-default js2-basic-offset 2)
   #+END_SRC
   或者
   #+BEGIN_SRC emacs-lisp
     (javascript :variables js2-basic-offset 2)
   #+END_SRC

   同样 缩进 JSON 文件的方式,或在 层中设置
   #+BEGIN_SRC emacs-lisp
     (setq-default js-indent-level 2)
   #+END_SRC

   浏览器端 REPL 交互 ,需要开启 httpd 服务
   空白页交互 run-skewer
   页面交互,需要安装 Greasemonkey 脚本
   #+BEGIN_SRC elisp
     (setq-default dotspacemacs-configuration-layers
                   '((javascript :variables javascript-repl `skewer)))
   #+END_SRC

   服务器端 REPL 交互 
   #+BEGIN_SRC elisp
     (setq-default dotspacemacs-configuration-layers
                   '((javascript :variables javascript-repl `nodejs)))
   #+END_SRC

   node ,配置 自动把 node_modules/.bin 添加到  =exec_path=
   #+BEGIN_SRC elisp
     (setq-default dotspacemacs-configuration-layers
                   '((javascript :variables node-add-modules-path t)))
   #+END_SRC

   js2 模式
   ~SPC m w~ ,切换 js2 模式警告和错误
   ~%~,块间跳转
   
   js2 mode 补全 ~node~ 变量
   #+BEGIN_SRC elisp
     (setq-default dotspacemacs-configuration-layers
                   '((javascript :variables js2-include-node-externs t)))
   #+END_SRC

   | ~SPC m z c~ | 隐藏元素          |
   | ~SPC m z o~ | 显示元素          |
   | ~SPC m z r~ | 显示所有元素      |
   | ~SPC m z e~ | 隐藏/显示元素开关 |
   | ~SPC m z F~ | 隐藏函数开关      |
   | ~SPC m z C~ | 隐藏注释开关      |

   重构（js2-refactor）
   | ~SPC m k~     | 删除到行的末尾，但不跨越语义边界                                       |
   | ~SPC m r 3 i~ | 将三元运算符转换为 if 语句                                             |
   | ~SPC m r a g~ | 如果缺少，则创建一个= / * global * / = annotation，并添加 var 以指向它 |
   | ~SPC m r a o~ | 用对象文字命名参数   替换函数调用的参数                                |
   | ~SPC m r b a~ | 将最后一个子节点移出当前函数，if-statement，for-loop 或 while-loop     |
   | ~SPC m r c a~ | 将多行数组转换为一行                                                   |
   | ~SPC m r c o~ | 将多行对象文字转换为一行                                               |
   | ~SPC m r c u~ | 将多行函数转换为一行（期望分号作为语句分隔符）                         |
   | ~SPC m r e a~ | 将一行数组转换为多行                                                   |
   | ~SPC m r e f~ | 将标记的表达式提取到新的命名函数中                                     |
   | ~SPC m r e m~ | 将标记的表达式提取到对象文字中的新方法中                               |

   文档（js-doc）
   | ~SPC m r d b~ | 为当前文件插入 JSDoc 注释 |
   | ~SPC m r d f~ | 为函数 插入 JSDoc 注释    |
   | ~SPC m r d t~ | 给注释插入 tag|
   | ~SPC m r d h~ | 显示可用的 jsdoc tag 列表 |

   REPL（skewer-mode）

   | ~SPC m e e~ | 求值选中部分表达式               |
   | ~SPC m e E~ | 求值选区并插入结果               |
   | ~SPC m s b~ | 求值 buff                        |
   | ~SPC m s B~ | 求值选区 并 切换到 REPL buffer   |
   | ~SPC m s r~ | 将当前选区发送到 REPL            |
   | ~SPC m s s~ | 切换到 REPL                      |

** lisp
*** 调试
    #+BEGIN_SRC elisp
      (defun helloworld (name)
        (let ((n (subroutine name)))
          (message (format "Hello world, %s!" name))))

      (defun subroutine (s)
        (concat "my dear " s))

      (helloworld "Spacemacs")
    #+END_SRC

    步骤
    1. 此在文件里 按 ~, '~
    1. 把光标放在源码块， 按 ~, e f~. 每个表达式都要执行一遍 (函数的定义有了)
    2. 如果想调试某个表达式，把光标放在 ~defun~ 关键字处，按 ~, d f~, 它会放置一个 ~断点~ (断点有了)
    3. 然后在调用的地方 ， =(helloworld "Spacemacs")= 右括号尾部, 按 ~, e e~ ,求值表达式 (调试的代码有了)

*** 结构安全编辑
    保持 ~s-expressions~ 平衡
    开关 ~SPC m T s~
     
    自动开启
    #+BEGIN_SRC emacs-lisp
      (spacemacs/toggle-evil-safe-lisp-structural-editing-on-register-hook-emacs-lisp-mode)
    #+END_SRC

    or to enable it for all supported modes:

    #+BEGIN_SRC emacs-lisp
      (spacemacs/toggle-evil-safe-lisp-structural-editing-on-register-hooks)
    #+END_SRC

    模式行会显示此标记  =🆂=
*** 键绑定
    | ~SPC m g G~                | 两一个窗口打开定义                       |
    | ~SPC m h h~                | 函数简短描述                             |
    | ~SPC m c c~                | 字节编译当前文件                         |
    | ~SPC m c l~                | 弹出 compile-log buffer                  |
    | ~SPC m e $~ or ~SPC m e l~ | 跳到行尾并求值,( 这个好 )                |
    | ~SPC m e b~                | evaluate current buffer                  |
    | ~SPC m e C~                | evaluate current =defun= or =setq=       |
    | ~SPC m e e~                | 求值光标前的表达式                       |
    | ~SPC m e f~                | 求值当前函数 (好)                        |
    | ~SPC m e r~                | evaluate current region  (这个很好)      |
    | ~SPC m :~                  | toggle nameless minor mode(关闭命名空间) |
    | ~SPC k :~                  | 执行 lisp 命令                           |
    | ~SPC k (~                  | 插入同级表达式(上一行)                   |
    | ~SPC k )~                  | 插入同级表达式(下一行)                   |
    | ~SPC k $~                  | 到此表达式尾部括号                       |
    | ~SPC k 0~                  | 到此表达式开头 ( % 更好)                 |
    | ~SPC k ds~                 | 删除光标下的符号 (还行)                  |
    | ~SPC k dw~                 | 删除 word                                |
    | ~SPC k w~                  | wrap expression with parenthesis         |
    | ~SPC k W~                  | unwrap expression                        |
    | ~SPC k y~                  | copy expression (还行)                   |
*** 用 overseer 测试
    | ~SPC m t a~ | overseer test |
    | ~SPC m t A~ | test debug    |
    | ~SPC m t t~ | run test      |
    | ~SPC m t b~ | test buffer   |
    | ~SPC m t f~ | test file     |
    | ~SPC m t g~ | test tags     |
    | ~SPC m t p~ | test prompt   |
    | ~SPC m t q~ | test quiet    |
    | ~SPC m t h~ | test help     |
*** 开启 smartparens 可以求值配对函数
    | ~SPC m e c~ | evaluate sexp around point   |
    | ~SPC m e s~ | evaluate symbol around point |
*** 调试
    | ~SPC m d f~ | on a =defun= symbol toggle on the instrumentalisation of the function  |
    | ~SPC m d F~ | on a =defun= symbol toggle off the instrumentalisation of the function |
    | ~SPC m d t~ | insert =(debug)= to print the stack trace and re-evaluate the function |

** org
*** Project [ 项目支持 ]
    指定项目特定 TODOs,如果是绝对路径，那么所有项目的 TODOs 都在那个文件里，只有
    文件名的话,就存储在项目的根目录

    #+BEGIN_SRC emacs-lisp
      (setq-default dotspacemacs-configuration-layers
                    '((org :variables org-projectile-file "TODOs.org")))
    #+END_SRC

    TODO 文件不会自动加载到 agenda 中的，可以这样配置 
    #+BEGIN_SRC emacs-lisp
      (with-eval-after-load 'org-agenda
        (require 'org-projectile)
        (mapcar '(lambda (file)
                   (when (file-exists-p file)
                     (push file org-agenda-files)))
                (org-projectile-todo-files)))
    #+END_SRC
*** capture 模板
    #+begin_src lisp
      ("f"         ; hotkey
       "测试" ; name
       entry       ; type
       (file+headline (lambda () (concat org-directory "/work.org")) "Tasks") ;target
       "* TODO [#A] %^{Task}\n%a%i%t%U\n" ; template
       )
    #+end_src

    类型 - type

    #+begin_verse
entry 指定标题节点
item 一个简单列表中的项目。同样，这个类型的模板最终需要存储在 org 文件中。
checkitem 一个带有 checkbox 的项目。与 item 类型的模板相比，多了一个 checkbox。
table-line 在指定位置表格添加一行新的记录。
plain 一段文字。如何输入的，就如何记录下来。
    #+end_verse


    target ：

    指定文件名和文件中唯一的标题
    (file+headline "path/to/file" "node headline")

    指定文件名和完整的标题路径（如果需要存放片段的标题不唯一）
    (file+olp "path/to/file" "Level 1 heading" "Level 2" ...)

    指定日期方式的标题路径，在今天的日期下添加片段
    (file+datetree "path/to/file")

    %a          annotation, normally the link created with org-store-link (文件存储路径)
    %i          initial content, the region when capture is called with C-u. (选择的内容)
    %t          timestamp, date only (当前日期)
    %T          timestamp with date and time (当前时间)
    %u, %U      like the above, but inactive timestamps (当前日期时间)
    %[FILE] Insert the contents of the file given by FILE.
    %(EXP) 
    %<FORMAT>  The result of format-time-string on the FORMAT specification.
    %c Current kill ring head.
    %x Content of the X clipboard.
    %k Title of the currently clocked task.
    %? After completing the template, position point here
    %^g Prompt for tags, with completion on tags in target file.
    %^G Prompt for tags, with completion all tags in all agenda files.
    %^t Like ‘%t’, but prompt for date. Similarly ‘%^T’, ‘%^u’, ‘%^U’. You may define a prompt like ‘%^{Birthday}t’.
    %^C Interactive selection of which kill or clip to use.
    %^L Like ‘%^C’, but insert as link.
    %^{PROP}p Prompt the user for a value for property PROP.
*** Sticky header[ 粘性标题支持 ]
    #+BEGIN_SRC emacs-lisp
      (setq-default dotspacemacs-configuration-layers '(
                                                        (org :variables
                                                             org-enable-sticky-header t)))
    #+END_SRC
*** 快捷键
**** 开关
     | ~SPC m T c~ | org-toggle-checkbox                           |
     | ~SPC m T e~ | org-toggle-pretty-entities                    |
     | ~SPC m T i~ | org-toggle-inline-images                      |
     | ~SPC m T l~ | org-toggle-link-display                       |
     | ~SPC m T t~ | org-show-todo-tree                            |
     | ~SPC m T T~ | org-todo                                      |
     | ~SPC m T V~ | toggle =space-doc-mode= a read-only view mode |
     | ~SPC m T x~ | org-preview-latex-fragment                    |
**** agenda list (清单列表)
     SPC m a	org-agenda  执行清单命令
     SPC m C c	org-agenda-clock-cancel 取消
     SPC m C i	org-agenda-clock-in  开始计时
     SPC m C o	org-agenda-clock-out
     SPC m C p	org-pomodoro 
     SPC m d d	org-agenda-deadline 清单结束时间
     SPC m d s	org-agenda-schedule 清单开始时间
     SPC m i e	org-agenda-set-effort
     SPC m i p	org-agenda-set-property 设置清单的属性
     SPC m i P	org-agenda-priority 设置优先级
     SPC m i t	org-agenda-set-tags
     SPC m s r	org-agenda-refile
     M-j	next item 下一项  (前后清单详情)
     M-k	previous item 前项
     M-h	earlier view 早期视图
     M-l	later view 后视图
     gr	refresh 刷新
     gd	toggle grid 切换网格
     C-v	change view 变换视图
     RET	org-agenda-goto
     L    隐藏完已经成的东西  

**** evil-org-mode
     | ~gj~ / ~gk~   | 元素间导航        |
     | ~gh~ / ~gl~   | 父 /子 间导航     |
     | ~gH~          | 根节点,第一级标题 |
     | ~M-j~ / ~M-k~ | 元素移动          |
     | ~M-J~ / ~M-K~ | 元素树移动        |
     | ~M-h~ / ~M-l~ | 元素自身升降级    |
     | ~M-H~ / ~M-L~ | 元素树升降级      |
**** 表
     | ~SPC m t c~   | 把表转换为 table.el              |
     | ~SPC m t d c~ | 删除列                           |
     | ~SPC m t d r~ | 删除行                           |
     | ~SPC m t e~   | 插入计算结果                     |
     | ~SPC m t E~   | 导出表格(格式自己配)             |
     | ~SPC m t i c~ | 插入列                           |
     | ~SPC m t i h~ | 插入水平线                       |
     | ~SPC m t i r~ | 插入行                           |
     | ~SPC m t I~   | 将文件导入表格                   |
     | ~SPC m t n~   | 新建表格                         |
     | ~SPC m t N~   | 新建 table.el 格式表格           |
     | ~SPC m t p~   | 使用 org-plot / gnuplot 绘制表格 |
     | ~SPC m t r~   | 应用公式计算当前行               |
     | ~SPC m t s~   | 表格排序                         |
     | ~SPC m t t f~ | 公式调试器开关                   |
     | ~SPC m t t o~ | 行/列号的显示开关                |
     | ~SPC m t w~   | 长行截断到两行                   |
**** 元素插入
     | ~SPC m i d~   | org-insert-drawer                                |
     | ~SPC m i D s~ | 插入屏幕截图                                     |
     | ~SPC m i D y~ | 插入网络图片(图片保存在一级标题命名的文件夹下)   |
     | ~SPC m i e~   | org-set-effort                     effort        |
     | ~SPC m i f~   | org-insert-footnote              脚注            |
     | ~SPC m i h~   | org-insert-heading             标题              |
     | ~SPC m i H~   | org-insert-heading-after-current                 |
     | ~SPC m i i~   | org-insert-item 列表项                           |
     | ~SPC m i K~   | spacemacs/insert-keybinding-org         键盘按键 |
     | ~SPC m i l~   | org-insert-link        链接                      |
     | ~SPC m i L~   | 网络链接，会自动附上有标题的链接                 |
     | ~SPC m i n~   | org-add-note  插入一段 note                         |
     | ~SPC m i p~   | org-set-property    插入属性                         |
     | ~SPC m i s~   | org-insert-subheading 插入子标题                      |
     | ~SPC m i t~   | org-set-tags                  插入 tag              |
     |               |                                                  |
**** link
     打开链接 | ~SPC m x o~ | org-open-at-point |
**** Babel / Source Blocks
     | ~SPC m b .~ | 进入 Transient 状态|
     | ~SPC m b a~ | 产生一个 has 码 org-babel-sha1-hash         |
     | ~SPC m b b~ | 执行块 org-babel-execute-buffer            |
     | ~SPC m b c~ | 检查 org-babel-check-src-block              |
     | ~SPC m b d~ | 分成两段代码块 org-babel-demarcate-block      |
     | ~SPC m b e~ | 执行 org-babel-execute-maybe               |
     | ~SPC m b f~ | org-babel-tangle-file                    |
     | ~SPC m b g~ | 跳到命名代码块 org-babel-goto-named-src-block   |
     | ~SPC m b i~ | org-babel-lob-ingest                     |
     | ~SPC m b I~ | 代码块信息 org-babel-view-src-block-info      |
     | ~SPC m b j~ | 插入头部参数 org-babel-insert-header-arg        |
     | ~SPC m b l~ | org-babel-load-in-session                |
     | ~SPC m b n~ | 下一个代码块 org-babel-next-src-block         |
     | ~SPC m b o~ | 打开求值结果 buffer  org-babel-open-src-block-result |
     | ~SPC m b p~ | 上一个代码块 org-babel-previous-src-block            |
     | ~SPC m b r~ | 跳到命名结果块 org-babel-goto-named-result      |
     | ~SPC m b s~ | org-babel-execute-subtree                |
     | ~SPC m b t~ | org-babel-tangle                         |
     | ~SPC m b u~ |跳到代码块头部 org-babel-goto-src-block-head     |
     | ~SPC m b v~ |在另一个 buffer 展开代码块  org-babel-expand-src-block |
     | ~SPC m b x~ | org-babel-do-key-sequence-in-edit-buffer |
     | ~SPC m b z~ | org-babel-switch-to-session              |
     | ~SPC m b Z~ | org-babel-switch-to-session-with-code    |
**** 加强
     | ~SPC m x b~ | 粗体     |
     | ~SPC m x c~ | 代码     |
     | ~SPC m x i~ | 斜体     |
     | ~SPC m x r~ | 清除特性 |
     | ~SPC m x s~ | 删除线   |
     | ~SPC m x u~ | 下划线   |
     | ~SPC m x v~ | 等宽     |

**** 日历导航
     | ~M-l~ | 明天 |
     | ~M-h~ | 昨天 |
     | ~M-j~ | 下周 |
     | ~M-k~ | 上周 |
     | ~M-L~ | 下月 |
     | ~M-H~ | 上月 |
     | ~M-J~ | 下年 |
     | ~M-K~ | 上年 |
**** 插入日期，时间
     ‘2/5/3’	⇒ 2003-02-05 插入日期
     ‘11am-1:15pm’	⇒ 11:00-13:15 插入时间

**** Presentation [简报,放大镜]
     激活  ~SPC SPC org-present~
**** org-export
     对于报错      
     ` user-error: Unable to resolve link: "thank-you" `
     使用 
     #+OPTIONS: broken-links:t

** php 
   需要初始化工程 
   cd /root/of/project
   touch .ac-php-conf.json
   
   然后执行命令   ac-php-remake-tags-all
   
   若有项目中含有这么两个文件，那么会自动创建 .ac-php-conf.json 文件
   1. =.projectile=
   2. =vendor/autoload.php=

   | 查关键词           | php-search-documentation |
   | 浏览手册           | php-browse-manual        |
   | 标记函数           | mark-defun               |
   | 跳到定义           | ~SPC m g g~              |
   | jump back 调回返回 | ~C-t~                    |

    lsp 调用 intelephense
** project  
   配置文件 .projectile 
   排除文件 .dot
   
** python
   后端 anaconda ,lsp-python 
   自动完成
   代码导航 
   文档查找，用 pylookup
   测试 test-run
   打开虚拟环境 pyenv
   自动删除未使用的库  autoflake
   对导入库排序 isort 
   修复导入 importmagic
   pip 包管理器
   
   配置项目后端 .dir-locals.el
   #+begin_src lisp
     ((python-mode (python-backend . lsp)))
   #+end_src

   配置局部变量  ~SPC f v d~

   anaconda 对于依赖报错 
   #+BEGIN_EXAMPLE
     Blocking call to accept-process-output with quit inhibited!!
   #+END_EXAMPLE

   需要手动安装以下依赖
   #+BEGIN_SRC sh
     pip install --upgrade "jedi>=0.9.0" "json-rpc>=1.8.1" "service_factory>=0.1.5"
   #+END_SRC

   如果无法运行 anaconda 服务器 ，需要配置 PYTHONPATH 环境变量 

   语法检查，安装 
   #+BEGIN_SRC sh
     pip install flake8
   #+END_SRC

   测试，安装 pytest
   #+BEGIN_SRC emacs-lisp
     (setq-default dotspacemacs-configuration-layers
                   '((python :variables python-test-runner 'pytest)))
   #+END_SRC

   格式化工具
   #+BEGIN_SRC emacs-lisp
     (setq-default dotspacemacs-configuration-layers '(
                                                       (python :variables python-formatter 'yapf)))
   #+END_SRC

   测试时自动保存缓冲区
   #+BEGIN_SRC emacs-lisp
     (setq-default dotspacemacs-configuration-layers '(
                                                       (python :variables python-save-before-test nil)))
   #+END_SRC

   要使用 pylookup,帮助文档,能跳到官网
   先更新数据库 ~SPC SPC pylookup-update~.

   自动排序
   #+BEGIN_SRC elisp
     (setq-default dotspacemacs-configuration-layers
                   '((python :variables python-sort-imports-on-save t)))
   #+END_SRC

   实现 importmagic 功能需要安装 
   #+BEGIN_SRC sh
     pip install importmagic epc
   #+END_SRC

   管理虚拟环境,隔离包版本,使用的是 pyvenv 工具
   先要安装工具 virtualenvwrapper,然后配置环境变量 =WORKON_HOME= ,指定虚拟环境的目录

   #+begin_src txt
virtualenvwrapper，相较于使用 virtualenv， 好处就是把所有环境都放在同一目录下管理，以便更好的管理及切换。
环境变量 WORKON_HOME，值为你想保存 env 文件的路径

创建虚拟环境 mkvirtualenv test
可以安装包了　pip

查看可用虚拟环境 lsvirtualenv  或　workon
   #+end_src

   #+begin_src bash
     # 外部用法
     $ pip install virtualenvwrapper
     $ export WORKON_HOME=~/Envs
     $ mkdir -p $WORKON_HOME
     # $ source /usr/local/bin/virtualenvwrapper.sh
     $ source ~/.pyenv/shims/virtualenvwrapper.sh
     $ mkvirtualenv env1
   #+end_src
   | ~SPC m v a~ | 激活任何目录中的虚拟环境          |
   | ~SPC m v d~ | 停用激活的虚拟环境                |
   | ~SPC m v w~ | 在 ~WORKON_HOME~   中处理虚拟环境 |

   用 pyenv 管理多个版本的 Python,使用的是 pyenv ，！！！注意只有一字之差
   设置 pyenv 环境, ~SPC m v s~ 
   取消设置 pyenv 环境, ~SPC m v u~ 

   交互模式
   启动交互模式, ~SPC m s i~ 

   运行 python 脚本,在多个文件同时工作时有用,因为交互模式不重载更改的模块  ~SPC m c c~
   在 comint shell 中执行当前文件, ~SPC m c c~ 
   在 comint shell 中执行当前文件并切换到 =insert state= , ~SPC m c C~ 
   如果输入参数，可以先用 ~SPC u~ 按键

   测试,这里要了解下的。????
   启动项目的所有测试, ~SPC m t a~
   启动当前测试, ~SPC m t t~

   重构,反射
   修复缺少的导入语句 ~SPC m r f~
   删除未使用的导入, ~SPC m r i~
   排序导入, ~SPC m r I~

   Pip 包管理
   列出所有在当前虚拟环境中 安装的包, ~SPC m P~
   d,删除标记
   r,刷新列表
   i,提示安装
   U,更新所有标记
   u,更新标记
   x,执行

   跳转
   跳回,  ~C-o~ 
** ranger (漫游者)
 - 启用预览 ranger-show-preview t
 - 切换开关 (setq ranger-enter-with-minus t)        ~-~ 
 - 预览隐藏文件开关 (setq ranger-show-hidden t)    zh
 - 设置目录层数 (setq ranger-parent-depth 2)  根据 z-和 z + 进行调整
 - 将父窗口的大小设置为帧大小的一部分 (setq ranger-width-parents 0.12)
 - 当目录层数太多，可以设置父目录最大宽度，避免显示太小 (setq ranger-max-parent-width 0.12)
 - 预览文本显示的开关 (setq ranger-show-literal t)  zi
 - 预览窗口的大小 (setq ranger-width-preview 0.55)
 - 不预览文件类型 (setq ranger-ignored-extensions '("mkv" "iso" "mp4"))
 - 不预览文件大小 (setq ranger-max-preview-size 10)  单位为兆( MB )
   | ~SPC a t r r~   | 启动 ranger                                                |
   | ~SPC a t r d~   | 启动 deer                                                  |
   | ~C-p~           | 在 ranger 与 deer 之间切换                                 |
   | ~yy~            | copy                                            (文件操作) |
   | ~pp~            | paste                                                      |
   | ~R~             | rename                                                     |
   | ~D~             | delete                                                     |
   | ~;C~            | copy directory / copy and move directory (目录操作)        |
   | ~;+~            | create directory                                           |
   | ~f~             | 切换目录                                                   |
   | ~l~             | 进入目录                                                   |
   | ~h~             | go up directory                                            |
   | ~H~             | 在上一个导航历史中切换                                     |
   | ~i~             | 预览开关                       (预览操作)                  |
   | ~zi~            | 预览文本形式开关                                           |
   | ~C-j~           | scroll preview window down                                 |
   | ~C-k~           | scroll preview window up                                   |
   | ~zh~            | dotfiles 开关                                              |
   | ~o~             | 排序                                                       |
   | ~q~             | quit                          (ranger 操作)                |
   | ~;g~            | revert buffer                                              |
   | ~z-~            | reduce number of parents                                   |
   | ~z+~            | increment number of parents                                |
   | ~C-SPC~ / ~TAB~ | 文件标记    (mark 操作)                                    |
   | ~v~             | 标记所有                                                   |
   | ~t~             | 标记切换                                                   |
   | ~S~             | enter shell                                                |
   | ~C-n~           | 创建 Tab  (Tab 操作)                                       |
   | ~C-w~           | 关闭 Tab                                                   |
   | ~g t~     / ~C-Tab~ | 下一个 Tab  (不好使)                                            |
   | ~C-S-Tab~        |      上一个 Tab                                               |
** react
** semantic 
   底部显示定义
   顶部显示函数
   支持 refactor

   | ~SPC m r~ | srefactor: refactor thing at point. |
** sql 
    | 显示*SQL*buffer| ~SPC m b b~ |
    | 显示数据库中的表 | ~SPC m l a~ |
    | 显示表信息       | ~SPC m l t~ |
    | 发送 buffer 执行   | ~SPC m s b~ |
    | 发送选区执行     | ~SPC m s r~ |

** tern
   增加了对 JavaScript 代码分析的引擎 [ tern 引擎 ]

   安装
   #+BEGIN_SRC sh
     $ npm install -g tern
   #+END_SRC

   在多个不同的编辑会话中重用服务器
   默认不创建项目  =.tern-port= 文件
   #+BEGIN_SRC emacs-lisp
     (tern :variables tern-disable-port-files nil)
   #+END_SRC

   ~M-.~ ,上个命令

   | ~SPC m C-g~   | 带你回到你按 ~M-.~  的最后一个位置                       |
   | ~SPC m g g~   | 跳转到光标下的东西的定义处                               |
   | ~SPC m g G~   | 跳转到给定名称的定义(gtag)                               |
   | ~SPC m h d~   | 找到光标下的东西的文档, 再按一次打开关联的 URL（如果有） |
   | ~SPC m h t~   | 找到光标下的东西的类型                                   |
   | ~SPC m r r V~ | 使用 tern 重命名光标下的变量                             |
** Yasnippet 
   执行命令,用 `` 包含的代码能够执行 #+DATE: `(format-time-string "%Y-%m-%d %H:%M:%S" (current-time))`

** go
** Ruby layers
   1.打开交互模式 inf-ruby
   2.使用 ruby-send-region

** vue
   处理 vue 文件
** lsp
   相当于每个语言有每个语言的编译器一样，这种语言服务统一各个语言的差别，使用同样的功能接口，当然也有差异。 
   用此层，基本默认语言都用这个插件，除非另外说明
  
   LSP 生态系统基于两个软件包:
   - lsp-mode
   - lsp-ui

   功能
   - 交叉引用，相当于智能识别语言的语法了哇，给出上下文
   - 广泛重命名
   - 用 eldoc 显示 标签帮助
   - 用 lsp-ui-doc 在子 frame 中显示符号文档
   - lsp-describe-session 列出语言服务的功能
   - 使用 imenu 进行 导航
   - lsp-navigation 方便导航 (lsp-ui-peek 另一种)  快捷键 *SPC m g/G*
** dash
** spell checking    
 | ~SPC S a b~     | Add word to dict (buffer)              |
 | ~SPC S a g~     | Add word to dict (global)              |
 | ~SPC S a s~     | Add word to dict (session)             |
 | ~SPC S b~       | Flyspell whole buffer                  |
 | ~SPC S c~       | Flyspell correct word before point     |
 | ~SPC S s~       | Flyspell correct word at point         |
 | ~SPC u SPC S c~ | Flyspell correct all errors one by one |
 | ~SPC S d~       | Change dictionary                      |
 | ~SPC S n~       | Flyspell goto next error               |
 | ~SPC t S~       | Toggle flyspell                        |

* package
** tern
   智能的 Javascript 工具
*** 配置文件    
    工程配置文件 .tern-project 按目录树向上遍历，没有就采用默认配置
    主配置文件 .tern-config
    
    选项 
    --port <number> : 指定监听端口
    --host <host>; h 指定监听主机（默认 127.0.0.1)
*** JSON 协议
    请求方式是 ~POST~ 的 ~JSON~ 。
    
    json 文档结构包含可选的  query, files, and timeout
*** 功能
    type 查询某事物的类型。
    file，end（必填），start（可选）

    completions 向服务器询问给定点的一组完成情况集合
    接受的字段是： file，end（必填） 指定要完成的位置
    types（可选，默认 false） 是否在结果数据中包含完成的类型
    docs，urls，origins（可选，默认 false）

    documentation 获取给定表达式的文档字符串和 URL（如果有）。
    使用 file，end（必需）和 start（可选）字段来指定我们感兴趣的表达式。
    
    file 指向定义文件的位置 
    end 字段是此文件的偏移量
*** 编程接口
    基本服务功能 (不含 HTTP 或读配置文件) 的实现在 ~lib/tern.js~
   
    自带的插件有 
    CommonJS module plugin: 
    Node.js 插件 : node
    Node.js 解析插件
    RequireJS plugin
    每种插件有自己的配置方式
*** 服务器插件
    为服务器添加额外的功能
    #+begin_src json
      {
          "libs": [
              "browser",
              "jquery"
          ],
          "loadEagerly": [
              "importantfile.js"
          ],
          "plugins": {
              "requirejs": {
                  "baseURL": "./",
                  "paths": {}
              },"node":{

              }
          }
      }
    #+end_src
    
loadEagerly: 指定的文件永远加载
plugins 用于包含插件(可在里面配置插件的具体属性)
** org-web-tools
   - org-web-tools-insert-link-for-url 插入链接，会自动附上标题
   - org-web-tools-insert-web-page-as-entry 把链接处的文章转为 org 格式文件插入
   - org-web-tools-read-url-as-org 同上，只是读到不同缓冲区
   - org-web-tools-convert-links-to-page-entries 只包含链接链表可以用此命令，用来转链接到标题
   - 以下是实用函数
   - org-web-tools--dom-to-html:  (IMG 标记可能使用结束的“ / IMG”标记呈现)
   - org-web-tools--eww-readable:  返回 HTML 的“可读”部分和标题
   - org-web-tools--get-url:  以字符串形式返回 URL 的内容
   - org-web-tools--html-title:HTML 页面的返回标题
* 窗口管理 
  假设 Emacs 需要打开三个类型的窗口，1 代码，2 终端 3，文档，怎么确保代码在对应的窗口打开，可以使用 window-purpose
  
 命令 
- switch-to-buffer and display-buffer
- helm-source-buffers-list
- purpose-mode 与 pupo-mode 切换
- SPC r b 打开 buffer (同一类的)
- SPC r p 选择某类的 buffer 打开
